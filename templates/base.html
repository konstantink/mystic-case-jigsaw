{{define "base"}}

<!DOCTYPE html>
<html>
    <head>
        <!-- Google Tag Manager -->
            <script>
                (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                })(window,document,'script','dataLayer','{{.GtmID}}');
            </script>
        <!-- End Google Tag Manager -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
        <link rel="stylesheet" href="/static/style.css" />
        <title>{{template "title"}}</title>
    </head>
    <body>
        <!-- Google Tag Manager (noscript) -->
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id={{.GtmID}}"
            height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
        <!-- End Google Tag Manager (noscript) -->
        <div id="main" class="{{if .IsMobile}}container-fluid{{else}}container-lg{{end}} p-4">
            <div class="row">
                <div class="col">
                    <div class="logo-container">
                        <img src="/images/logo.png" alt="logo">
                    </div>
                </div>
            </div>
            <div class="row py-3">
                <div class="col">

                    {{template "main" .}}

                </div>
            </div>
        </div>

        {{template "footer"}}

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <script type="application/javascript">
            async function onSubmit(e){if(e.preventDefault(),e.target.classList.add("was-validated"),e.target.checkValidity()){let l=Array.from(document.querySelectorAll("[name=quest-value]")),t=Array.from(document.querySelectorAll("[name=overall-value]")),c=Array.from(document.querySelectorAll("[name=artwork-value]")),a=Array.from(document.querySelectorAll("[name=quality-value]")),r=Array.from(document.querySelectorAll("[name=buy-value]")),o=document.querySelector("#reason-to-buy"),s=document.querySelector("#optional"),d=l.filter(e=>e.checked).length>0?parseInt(l.filter(e=>e.checked)[0].value):0,i=c.filter(e=>e.checked).length>0?parseInt(c.filter(e=>e.checked)[0].value):0,u=t.filter(e=>e.checked).length>0?parseInt(t.filter(e=>e.checked)[0].value):0,h=a.filter(e=>e.checked).length>0?parseInt(a.filter(e=>e.checked)[0].value):0,n=r.filter(e=>e.checked).length>0?r.filter(e=>e.checked)[0].value:"-",f=o.value,k=s.value;try{let v=await fetch("/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({quest:d,artwork:i,overall:u,quality:h,buyNext:n,reasonToBuy:f,optional:k})}),m=await v.json();if(m.success){let $=1;e.target.classList.remove("was-validated");let y=document.querySelector("#feedback-form"),q=document.querySelector("#feedback-thank-you");q.classList.remove("d-none"),q.classList.add("d-flex"),q.classList.add("mc-show"),y.classList.add("mc-hide"),setTimeout(()=>{let e=setInterval(()=>{--$<0&&(o.value="",s.value="",l.filter(e=>e.checked)[0].checked=!1,c.filter(e=>e.checked)[0].checked=!1,a.filter(e=>e.checked)[0].checked=!1,t.filter(e=>e.checked)[0].checked=!1,r.filter(e=>e.checked)[0].checked=!1,clearInterval(e),q.classList.add("d-none"),q.classList.remove("d-flex"),q.classList.remove("mc-show"),y.classList.remove("mc-hide"),y.classList.remove("d-none"))},2500)},50)}else console.log("Ooops")}catch(g){console.log(g)}}}
        </script>

    </body>
</html>

{{end}}
